<<<<<<< HEAD
# Traefik Static Configuration for Dashboard Service (Dashboard-Only Mode) - Traefik v3.0
# This Traefik instance serves ONLY the dashboard UI - no routing, no providers
# It proxies API requests to the main Traefik service's API
# Main Traefik API URL is provided via TRAEFIK_API_URL environment variable

# Entry points
# IMPORTANT: Explicitly define entrypoint to prevent Traefik from creating default "http" entrypoint on port 80
entryPoints:
  traefik:
    address: "0.0.0.0:8080"  # Cloud Run uses port 8080, must bind to 0.0.0.0

# Providers - minimal: only file provider for API proxy routes
# No Docker provider, no other providers - this is dashboard-only
# The file provider is only used to proxy /api/* requests to main Traefik
=======
# Traefik v3.0 Static Configuration for Dashboard Service (Dashboard-Only Mode)
# This Traefik instance serves ONLY the dashboard UI - no routing, no providers
# It proxies API requests to the main Traefik service's API
# Main Traefik API URL is provided via TRAEFIK_API_URL environment variable
#
# For Traefik v2.10, see traefik.dashboard-sidecar.yml

# Entry points
# Cloud Run uses port 8080; bind explicitly to avoid default entrypoints
entryPoints:
  traefik:
    address: "0.0.0.0:8080"

# Providers - minimal: only file provider for API proxy routes (generated by entrypoint)
>>>>>>> ccb37cb (auth in stg working)
providers:
  file:
    directory: /etc/traefik/dynamic
    watch: true

# API and Dashboard
<<<<<<< HEAD
# Serve dashboard on port 8080
# API requests (/api/*) are proxied to main Traefik service via dynamic routes
=======
# Serve dashboard on port 8080; API on same entrypoint for dashboard sidecar
>>>>>>> ccb37cb (auth in stg working)
api:
  dashboard: true
  insecure: true  # Dashboard accessible without auth (internal service)

<<<<<<< HEAD
# Logging - minimal for dashboard service
=======
# Logging
>>>>>>> ccb37cb (auth in stg working)
log:
  level: INFO
  format: json

<<<<<<< HEAD
# Access logs - minimal
=======
# Access logs
>>>>>>> ccb37cb (auth in stg working)
accessLog:
  format: json

# Health check endpoint
ping:
  entryPoint: traefik

# Global settings
global:
  checkNewVersion: false
  sendAnonymousUsage: false
