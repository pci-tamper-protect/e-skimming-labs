<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-Skimming Labs - Test Report Summary</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 2rem;
      color: #333;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      color: white;
      padding: 2rem;
      text-align: center;
    }

    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .header p {
      opacity: 0.9;
      font-size: 1.1rem;
    }

    .summary {
      padding: 2rem;
      background: #f8f9fa;
      border-bottom: 2px solid #e9ecef;
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .summary-card {
      background: white;
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    .summary-card h3 {
      color: #666;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.5rem;
    }

    .summary-card .value {
      font-size: 2rem;
      font-weight: 700;
      color: #333;
    }

    .summary-card .value.passed {
      color: #10b981;
    }

    .summary-card .value.failed {
      color: #ef4444;
    }

    .summary-card .value.pending {
      color: #f59e0b;
    }

    .labs {
      padding: 2rem;
    }

    .lab-section {
      margin-bottom: 3rem;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      overflow: hidden;
    }

    .lab-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .lab-header h2 {
      font-size: 1.5rem;
      margin: 0;
    }

    .lab-status {
      display: inline-block;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .lab-status.passed {
      background: #10b981;
    }

    .lab-status.failed {
      background: #ef4444;
    }

    .lab-status.pending {
      background: #f59e0b;
    }

    .test-list {
      padding: 1.5rem;
    }

    .test-item {
      padding: 1rem;
      border-bottom: 1px solid #e9ecef;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .test-item:last-child {
      border-bottom: none;
    }

    .test-item:hover {
      background: #f8f9fa;
    }

    .test-name {
      flex: 1;
      font-weight: 500;
    }

    .test-status {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-left: 1rem;
    }

    .test-status.passed {
      background: #d1fae5;
      color: #065f46;
    }

    .test-status.failed {
      background: #fee2e2;
      color: #991b1b;
    }

    .test-status.pending {
      background: #fef3c7;
      color: #92400e;
    }

    .test-duration {
      color: #666;
      font-size: 0.9rem;
      margin-left: 1rem;
    }

    .refresh-btn {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: #667eea;
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 50px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      transition: all 0.3s;
    }

    .refresh-btn:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.5);
    }

    .no-tests {
      padding: 2rem;
      text-align: center;
      color: #666;
    }

    .loading {
      padding: 2rem;
      text-align: center;
      color: #666;
    }

    .error {
      padding: 2rem;
      background: #fee2e2;
      color: #991b1b;
      border-radius: 8px;
      margin: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ðŸ§ª E-Skimming Labs Test Report</h1>
      <p>Playwright Test Summary Dashboard</p>
    </div>

    <div class="summary">
      <h2>Test Summary</h2>
      <div class="summary-grid">
        <div class="summary-card">
          <h3>Total Tests</h3>
          <div class="value" id="total-tests">-</div>
        </div>
        <div class="summary-card">
          <h3>Passed</h3>
          <div class="value passed" id="passed-tests">-</div>
        </div>
        <div class="summary-card">
          <h3>Failed</h3>
          <div class="value failed" id="failed-tests">-</div>
        </div>
        <div class="summary-card">
          <h3>Pending</h3>
          <div class="value pending" id="pending-tests">-</div>
        </div>
        <div class="summary-card">
          <h3>Labs Tested</h3>
          <div class="value" id="labs-tested">-</div>
        </div>
      </div>
    </div>

    <div class="labs" id="labs-container">
      <div class="loading">Loading test results...</div>
    </div>
  </div>

  <button class="refresh-btn" onclick="loadTestResults()">ðŸ”„ Refresh Results</button>

  <script>
    // Test data structure
    const testResults = {
      labs: [
        {
          id: 'lab1',
          name: 'Lab 1: Basic Magecart Attack',
          status: 'pending',
          tests: [
            { name: 'should complete checkout and trigger skimmer', status: 'pending', duration: null },
            { name: 'should capture console logs from skimmer', status: 'pending', duration: null },
            { name: 'should make network request to C2 server', status: 'pending', duration: null }
          ]
        },
        {
          id: 'lab2',
          name: 'Lab 2: DOM-Based Skimming',
          status: 'pending',
          tests: [
            { name: 'should enter CC information and verify C2 server shows exfiltrated data', status: 'pending', duration: null },
            { name: 'should monitor DOM mutations and attach to new forms', status: 'pending', duration: null },
            { name: 'should capture keystrokes in real-time', status: 'pending', duration: null }
          ]
        },
        {
          id: 'lab3',
          name: 'Lab 3: Extension Hijacking',
          status: 'pending',
          tests: [
            { name: 'should enter CC information and verify C2 server shows exfiltrated data', status: 'pending', duration: null }
          ]
        }
      ]
    }

    async function loadTestResults() {
      const container = document.getElementById('labs-container')
      container.innerHTML = '<div class="loading">Loading test results...</div>'

      try {
        // In a real implementation, this would fetch from a test results API
        // For now, we'll simulate by checking for test result files
        const results = await fetchTestResults()
        renderTestResults(results)
      } catch (error) {
        container.innerHTML = `<div class="error">Error loading test results: ${error.message}</div>`
      }
    }

    async function fetchTestResults() {
      // This would fetch actual test results from Playwright reports
      // For now, return the test structure
      return testResults
    }

    function renderTestResults(results) {
      const container = document.getElementById('labs-container')
      container.innerHTML = ''

      let totalTests = 0
      let passedTests = 0
      let failedTests = 0
      let pendingTests = 0

      results.labs.forEach(lab => {
        const labSection = document.createElement('div')
        labSection.className = 'lab-section'

        const labHeader = document.createElement('div')
        labHeader.className = 'lab-header'
        labHeader.innerHTML = `
          <h2>${lab.name}</h2>
          <span class="lab-status ${lab.status}">${lab.status.toUpperCase()}</span>
        `
        labSection.appendChild(labHeader)

        const testList = document.createElement('div')
        testList.className = 'test-list'

        if (lab.tests.length === 0) {
          testList.innerHTML = '<div class="no-tests">No tests available</div>'
        } else {
          lab.tests.forEach(test => {
            totalTests++
            if (test.status === 'passed') passedTests++
            else if (test.status === 'failed') failedTests++
            else pendingTests++

            const testItem = document.createElement('div')
            testItem.className = 'test-item'
            testItem.innerHTML = `
              <span class="test-name">${test.name}</span>
              <span class="test-status ${test.status}">${test.status.toUpperCase()}</span>
              ${test.duration ? `<span class="test-duration">${test.duration}ms</span>` : ''}
            `
            testList.appendChild(testItem)
          })
        }

        labSection.appendChild(testList)
        container.appendChild(labSection)
      })

      // Update summary
      document.getElementById('total-tests').textContent = totalTests
      document.getElementById('passed-tests').textContent = passedTests
      document.getElementById('failed-tests').textContent = failedTests
      document.getElementById('pending-tests').textContent = pendingTests
      document.getElementById('labs-tested').textContent = results.labs.filter(l => l.status !== 'pending').length
    }

    // Load results on page load
    loadTestResults()

    // Auto-refresh every 30 seconds
    setInterval(loadTestResults, 30000)
  </script>
</body>
</html>


